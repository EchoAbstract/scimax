# -*- mode: snippet -*-
# name: weekly-report
# key: kwr
# contributor: John Kitchin <jkitchin@andrew.cmu.edu>
# --
#+TITLE: Weekly progress report
#+AUTHOR: `user-full-name`
#+DATE: `(format-time-string "%F")`
#+DUEDATE: `(let* ((day 1) ; 1 is for Monday
		   (time (decode-time))
		   (dow (nth 6 time))
		   (day-of-month (nth 3 time))
		   (new-dow (+ (- 7 dow) day))
		   (new-time (encode-time 0 0 0
					  (+ new-dow day-of-month)
		           			  (nth 4 time)
						  (nth 5 time))))
		      (format-time-string "<%Y-%m-%d %a>" new-time))`
#+FILETAGS: weekly report `(if (boundp 'kitchingroup-github-id) kitchingroup-github-id "NOGITHUBID")`
#+VERSION: 0.1.1

# Create a new report each week. The report for the past week is due on Monday. This should not take more than 30 minutes to complete. If it does, you are not doing what I want, and we should talk about how to make it more efficient. It is fine to link to previous reports if you are continuing discussion from them.

* Executive summary
# Briefly summarize the report  here. This summary should describe in bullet form the current goals and results. You may want to link to a project file that describes the project goals.

$0

* Results and discussion for the past week
# Use this section to describe what was completed in the past week. Feel free to include tables, figures, and discussion. Short scripts are ok, but longer ones should go in an appendix with a reference link. This section should be complete enough for me to understand what you have done and what it means. It does not need to be excessively long. Use complete sentences, and a scientific writing style.



* Work in progress
# Briefly describe the work that is currently in progress, experiments, analysis, calculations, etc... Use subsections to organize your report.



* Plans for next week
# List specific plans that you plan to do in the next week. We will review these in the next report and discuss if they have been completed.



* Papers read
# Briefly summarize one or two papers with citations you read that are related to your work. This does not need to be more than a few sentences per paper, and does not need to be more than one or two papers unless this was a major effort for the week.

* Questions for me?
# You should probably have a question for me to answer. It could be about a research problem you are having (conceptual, programming, etc.), or how to do something in scimax. Put those questions here so I can answer them.

* References
# put a bibliography link here if you use one.

* Submit

Run this code block to commit and submit your report. Note that this will add everything in this directory, so do not do this if you have a lot of files.

#+BEGIN_SRC sh
# 10 MB max report size
MAXSIZE="10485760"
CHECK="\`du -s . | awk '{print \$1}'\`"

if [ "$MAXSIZE" -gt "$CHECK" ]; then
    git add *
    git commit -am "Automated commit"
    git push
else
    echo "This directory is too big. Please see Prof. Kitchin" 1>&2
    exit 1
fi
#+END_SRC

You can also use elisp:magit-status to add, commit and push the files.

a - will add a file
s - will stage a file
cc - will commit a set of changes, enter your message and type C-cC-c
Pp - will push to the remote repo

Either way, don't forget to send Prof. Kitchin an email that you have submitted the report and it is ready for review. Then, wait for feed back from him for you to review. You should try to not modify the repo until then to keep things simple.

Then run this block to pull the changes back for you to review. This block will probably only work if you have not made any new changes to this repo since you last pushed. If you did, you should see Prof. Kitchin for help merging the upstream changes with your local changes.

#+BEGIN_SRC emacs-lisp
(shell-command "git pull")
(revert-buffer)
(goto-char (point-min))
#+END_SRC

If you run into any problems, please see Prof. Kitchin.

*************** TODO Review weekly report for `kitchingroup-github-id` :jkitchin:
Do not remove this. It is here so this shows up in my agenda as an item to do.
*************** END
